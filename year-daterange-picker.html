<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.5/daterangepicker.css" />
</head>

<body>
  <div class="jumbotron rounded-0">
    <div class="row">
      <div class="col-sm-4">
        <select name="" id="year" class="form-control">
          <option value="current">current</option>
          <option value="2021-2022">2021-2022</option>
          <option value="2020-2021">2020-2021</option>
          <option value="2019-2020">2019-2020</option>
        </select>

      </div>
      <div class="col-sm-4">
        <input type="text" class="range-input" id="dateRange">
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"></script>
  <script src="https://uat-bkndcdn.npfs.co/static/theme/v1/js/plugins/moment.min.js?1653023101"></script>
  <script src="https://uat-bkndcdn.npfs.co/static/theme/v1/js/daterangepicker.min.js"></script>
  <script>
    $('#dateRange').daterangepicker({
      format: 'dd-mm-yy',
      ranges: {
        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
        'Last 90 Days': [moment().subtract(89, 'days'), moment()],
        'This Year': [moment().startOf('year').add(3, 'month'), moment()],
      },
      "alwaysShowCalendars": true,
      startDate: moment().startOf('year').add(3, 'month'),
      endDate: moment(),
    });
    $('#year').change(function () {
      let selection = $('#year').val();
      if (selection == 'current') {
        $('#dateRange').daterangepicker({
          ranges: {
            'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
            'Last 90 Days': [moment().subtract(89, 'days'), moment()],
            'This Year': [moment().startOf('year').add(3, 'month'), moment()],
          },
          "alwaysShowCalendars": true,
          minDate: '04/01/2022',
          maxDate: moment(),
        });
      }
      else {
        selectionStart = selection.slice(0, 4);
        selectionEnd = selection.slice(5, 9);
        $('#dateRange').daterangepicker({
          ranges: {
            'This Year': [moment().startOf('year').add(3, 'month'), moment()],
          },
          "alwaysShowCalendars": true,
          minDate: '04/01/' + selectionStart,
          maxDate: '03/31/' + selectionEnd,
          startDate: '04/01/' + selectionStart,
          endDate: '03/31/' + selectionEnd,
        });
      }

    });
  </script>

</body>

</html>
